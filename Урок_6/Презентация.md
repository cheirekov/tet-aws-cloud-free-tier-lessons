# Настройка на S3 за съхранение на файлове

---

## Какво ще научим днес?

- Какво е Amazon S3 и как работи
- Класове на съхранение в S3
- Как да създаваме и конфигурираме S3 buckets
- Как да качваме, изтегляме и управляваме обекти
- Как да настроим статично уеб хостване с S3

---

## Какво е Amazon S3?

![S3](https://i.imgur.com/1XZtVnL.png)

Amazon Simple Storage Service (S3) е обектно хранилище, което предлага мащабируемост, наличност на данни, сигурност и производителност

---

## Основни концепции на S3

- **Buckets** - контейнери за съхранение на обекти
- **Objects** - файлове и метаданни
- **Keys** - уникални идентификатори на обекти
- **Regions** - географски области за съхранение
- **Endpoints** - URL адреси за достъп
- **Access Control** - управление на достъпа
- **Storage Classes** - различни класове на съхранение

---

## Как работи S3?

1. Създавате bucket с уникално име
2. Качвате обекти (файлове) в bucket
3. Управлявате достъпа до обектите
4. Организирате, изтегляте, изтривате обекти
5. Следите използването и разходите

---

## Класове на съхранение в S3

![Storage Classes](https://i.imgur.com/2XZtVnL.png)

- **S3 Standard** - често достъпвани данни
- **S3 Intelligent-Tiering** - променящи се модели на достъп
- **S3 Standard-IA** - рядко достъпвани данни
- **S3 One Zone-IA** - некритични, рядко достъпвани данни
- **S3 Glacier** - архивиране
- **S3 Glacier Deep Archive** - дългосрочно архивиране

---

## Сравнение на класовете

| Клас | Наличност | Мин. период | Случаи на употреба |
|------|-----------|-------------|-------------------|
| Standard | 99.99% | Няма | Често достъпвани данни |
| Intelligent-Tiering | 99.9% | 30 дни | Променящи се модели |
| Standard-IA | 99.9% | 30 дни | Рядко достъпвани данни |
| One Zone-IA | 99.5% | 30 дни | Некритични данни |
| Glacier | N/A | 90 дни | Архивиране |
| Deep Archive | N/A | 180 дни | Дългосрочно архивиране |

---

## Създаване на S3 bucket

![Create Bucket](https://i.imgur.com/3XZtVnL.png)

1. Отворете S3 конзолата
2. Кликнете "Create bucket"
3. Въведете уникално име
4. Изберете регион
5. Конфигурирайте опции
6. Настройте разрешения
7. Прегледайте и създайте

---

## Конфигуриране на опции

- **Versioning** - съхранение на множество версии
- **Server access logging** - записване на заявки
- **Tags** - добавяне на метаданни
- **Default encryption** - автоматично криптиране
- **Object lock** - предотвратяване на изтриване

---

## Настройка на жизнен цикъл

![Lifecycle](https://i.imgur.com/4XZtVnL.png)

Lifecycle Rules автоматизират:
- Преход между класове на съхранение
- Изтичане на текущи версии
- Изтичане на предишни версии
- Изтриване на маркери за изтриване

---

## Настройка на CORS

CORS (Cross-Origin Resource Sharing) позволява уеб приложения от един домейн да достъпват ресурси от друг домейн

```json
[
  {
    "AllowedHeaders": ["*"],
    "AllowedMethods": ["GET", "PUT", "POST"],
    "AllowedOrigins": ["http://www.example.com"]
  }
]
```

---

## Качване на обекти в S3

![Upload](https://i.imgur.com/5XZtVnL.png)

### Чрез конзолата
1. Изберете bucket
2. Кликнете "Upload"
3. Изберете файлове/папки
4. Конфигурирайте настройки
5. Кликнете "Upload"

---

## Качване чрез AWS CLI

```bash
# Качване на файл
aws s3 cp file.txt s3://your-bucket-name/

# Качване на папка рекурсивно
aws s3 cp folder/ s3://your-bucket-name/folder/ --recursive

# Качване с определен клас на съхранение
aws s3 cp file.txt s3://your-bucket-name/ --storage-class STANDARD_IA
```

---

## Изтегляне на обекти от S3

### Чрез конзолата
1. Изберете bucket
2. Изберете обекта
3. Кликнете "Download"

### Чрез AWS CLI
```bash
# Изтегляне на файл
aws s3 cp s3://your-bucket-name/file.txt file.txt

# Изтегляне на папка
aws s3 cp s3://your-bucket-name/folder/ folder/ --recursive
```

---

## Управление на обекти

![Object Management](https://i.imgur.com/6XZtVnL.png)

- **Преименуване/Преместване** - копиране с ново име и изтриване на оригинала
- **Изтриване** - премахване на обекти
- **Версиониране** - управление на различни версии на обекти
- **Метаданни** - добавяне на допълнителна информация
- **Тагове** - организиране и категоризиране

---

## Статично уеб хостване с S3

![Static Website](https://i.imgur.com/7XZtVnL.png)

S3 може да хоства статични уебсайтове с HTML, CSS, JavaScript и изображения

---

## Настройка на статично уеб хостване

1. Създайте bucket и качете уеб файлове
2. Настройте публичен достъп
3. Добавете Bucket Policy за публичен достъп
4. Активирайте статично уеб хостване
5. Задайте index.html и error.html
6. Достъпете уебсайта чрез URL адреса

---

## Bucket Policy за публичен достъп

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "PublicReadGetObject",
      "Effect": "Allow",
      "Principal": "*",
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::your-bucket-name/*"
    }
  ]
}
```

---

## Персонализиран домейн с Route 53

![Route 53](https://i.imgur.com/8XZtVnL.png)

1. Създайте bucket с име, съвпадащо с домейна
2. Настройте статично уеб хостване
3. В Route 53, създайте A запис с Alias към S3 endpoint

---

## Практическа задача

![Практика](https://i.imgur.com/9XZtVnL.png)

1. Създайте S3 bucket
2. Създайте прост уебсайт (HTML, CSS, изображение)
3. Качете файловете в S3
4. Настройте публичен достъп
5. Активирайте статично уеб хостване
6. Създайте страница за грешка
7. Тествайте уебсайта

---

## Пример за HTML файл

```html
<!DOCTYPE html>
<html>
<head>
  <title>My S3 Website</title>
  <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>Welcome to My S3 Website</h1>
    <p>This website is hosted on Amazon S3!</p>
    <img src="aws-logo.png" alt="AWS Logo">
  </div>
</body>
</html>
```

---

## Пример за CSS файл

```css
body {
  font-family: Arial, sans-serif;
  background-color: #f0f0f0;
  margin: 0;
  padding: 0;
}
.container {
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
  background-color: white;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
  text-align: center;
  margin-top: 50px;
}
```

---

## Въпроси?

![Въпроси](https://i.imgur.com/0XZtVnL.png)
