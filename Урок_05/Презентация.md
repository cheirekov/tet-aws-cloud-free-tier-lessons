# Създаване и конфигуриране на EC2 инстанция

---

## Какво ще научим днес?

- Какво е EC2 и как работи
- Типове EC2 инстанции и AMI
- Как да създадем EC2 инстанция
- Как да се свържем с EC2 инстанция
- Как да управляваме сигурността чрез Security Groups

---

## Какво е EC2?

![EC2](https://i.imgur.com/1XZtVnL.png)

Amazon Elastic Compute Cloud (EC2) е уеб услуга, която предоставя сигурен, преоразмеряем изчислителен капацитет в облака

---

## Основни концепции на EC2

- **Инстанции** - виртуални сървъри в облака
- **AMI** - предварително конфигурирани шаблони
- **Типове инстанции** - различни хардуерни конфигурации
- **Ключови двойки** - сигурен начин за достъп
- **Security Groups** - виртуални защитни стени
- **Elastic IP** - статични IPv4 адреси
- **EBS** - постоянно блоково съхранение

---

## Как работи EC2?

1. Избирате AMI (операционна система и софтуер)
2. Избирате тип инстанция (хардуер)
3. Конфигурирате мрежови настройки
4. Конфигурирате съхранение
5. Конфигурирате Security Group
6. Стартирате инстанцията
7. Свързвате се с инстанцията
8. Използвате инстанцията

---

## Типове EC2 инстанции

![Instance Types](https://i.imgur.com/2XZtVnL.png)

- **General Purpose (T, M)** - балансирани ресурси
- **Compute Optimized (C)** - високопроизводителни процесори
- **Memory Optimized (R, X, z)** - оптимизирани за памет
- **Storage Optimized (D, I, H)** - високи IOPS
- **Accelerated Computing (P, G, F)** - хардуерни ускорители

---

## Free Tier инстанции

![Free Tier](https://i.imgur.com/3XZtVnL.png)

- 750 часа месечно на t2.micro или t3.micro (за 12 месеца)
- 1 vCPU
- 1 GB RAM
- Променлива EBS пропускателна способност
- Подходящи за: разработка, тестване, уеб сървъри с нисък трафик

---

## Amazon Machine Images (AMI)

![AMI](https://i.imgur.com/4XZtVnL.png)

AMI предоставя информацията, необходима за стартиране на инстанция:
- Операционна система
- Приложен сървър (опционално)
- Приложения (опционално)

---

## Типове AMI

1. **Публични AMI** - от AWS (Amazon Linux, Ubuntu, Windows)
2. **Собствени AMI** - създадени от вас
3. **AWS Marketplace AMI** - от трети страни
4. **Общностни AMI** - от общността на AWS

---

## Създаване на EC2 инстанция

![Launch Instance](https://i.imgur.com/5XZtVnL.png)

1. Отворете EC2 Dashboard
2. Кликнете "Launch instance"
3. Изберете AMI
4. Изберете тип инстанция
5. Конфигурирайте детайлите
6. Добавете съхранение
7. Добавете тагове
8. Конфигурирайте Security Group
9. Прегледайте и стартирайте
10. Създайте или изберете ключова двойка

---

## Свързване с Linux инстанция чрез SSH

![SSH](https://i.imgur.com/6XZtVnL.png)

```bash
# Задайте правилни разрешения на ключа
chmod 400 your-key.pem

# Свържете се с инстанцията
ssh -i your-key.pem ec2-user@your-instance-public-ip
```

---

## Потребителски имена според AMI

- Amazon Linux: **ec2-user**
- Ubuntu: **ubuntu**
- RHEL: **ec2-user** или **root**
- Debian: **admin** или **root**
- CentOS: **centos** или **root**

---

## Свързване от Windows с PuTTY

![PuTTY](https://i.imgur.com/7XZtVnL.png)

1. Конвертирайте .pem в .ppk с PuTTYgen
2. Конфигурирайте сесията в PuTTY:
   - Host Name: ec2-user@your-instance-public-ip
   - Connection > SSH > Auth: изберете .ppk файла
3. Запазете сесията и се свържете

---

## Свързване с Windows инстанция чрез RDP

![RDP](https://i.imgur.com/8XZtVnL.png)

1. Изберете Windows инстанцията в конзолата
2. Кликнете "Connect" > "RDP client"
3. Получете паролата с вашия .pem файл
4. Използвайте RDP клиент за свързване

---

## Security Groups

![Security Groups](https://i.imgur.com/9XZtVnL.png)

Security Groups действат като виртуална защитна стена за вашите инстанции

---

## Ключови характеристики на Security Groups

- Действат на ниво инстанция
- Поддържат само правила за разрешаване
- Stateful (отговорите са винаги разрешени)
- Промените се прилагат незабавно

---

## Създаване на Security Group

1. Отидете на "Security Groups" в EC2 конзолата
2. Кликнете "Create security group"
3. Въведете име и описание
4. Изберете VPC
5. Добавете правила за входящ трафик
6. Добавете правила за изходящ трафик
7. Добавете тагове
8. Кликнете "Create security group"

---

## Типични правила за Security Group

![Security Rules](https://i.imgur.com/0XZtVnL.png)

- SSH (порт 22) от вашия IP адрес
- HTTP (порт 80) от всички (0.0.0.0/0)
- HTTPS (порт 443) от всички (0.0.0.0/0)
- RDP (порт 3389) от вашия IP адрес (за Windows)

---

## Управление на EC2 инстанции

![Instance Management](https://i.imgur.com/1XZtVnL.png)

- **Start** - стартира спряна инстанция
- **Stop** - спира инстанцията (данните се запазват)
- **Hibernate** - хибернира инстанцията
- **Reboot** - рестартира инстанцията
- **Terminate** - прекратява инстанцията (данните се изтриват)

---

## Мониторинг на инстанции

![Monitoring](https://i.imgur.com/2XZtVnL.png)

- CPU Utilization
- Network In/Out
- Disk Read/Write
- Status Checks

---

## Създаване на AMI от инстанция

1. Изберете инстанцията
2. Actions > Image and templates > Create image
3. Въведете име и описание
4. Конфигурирайте опциите
5. Кликнете "Create image"

---

## Практическа задача

![Практика](https://i.imgur.com/3XZtVnL.png)

1. Създайте EC2 инстанция с Amazon Linux 2
2. Свържете се с инстанцията чрез SSH
3. Инсталирайте Apache уеб сървър
4. Създайте проста уеб страница
5. Създайте AMI от инстанцията
6. Стартирайте втора инстанция от вашия AMI

---

## Инсталиране на уеб сървър

```bash
# Актуализирайте пакетите
sudo yum update -y

# Инсталирайте Apache
sudo yum install -y httpd

# Стартирайте Apache
sudo systemctl start httpd
sudo systemctl enable httpd

# Създайте проста уеб страница
sudo bash -c 'echo "<html><body><h1>Hello from AWS EC2!</h1></body></html>" > /var/www/html/index.html'
```

---

## Въпроси?

![Въпроси](https://i.imgur.com/4XZtVnL.png)
